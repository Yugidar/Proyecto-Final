<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hermcode</title>
    <link rel="website icon" type="png" href="./assets/logo 1.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <link rel="stylesheet" href="styles/styles.css">
</head>
<body>
    <header class="container py-3 w-100 menu">
        <div class="menu-logo">
            <img class="me-1 menu-logo__img" src="assets/logo.png" alt="Logo de hermcode">
            <p class="text-uppercase quantico-font fw-bold fs-2">hermcode</p>
        </div>
        <nav class="menu-navbar">
            <a class="text-yellow fw-bold menu-navbar_a" href="normalCursos.html">MI APRENDIZAJE</a>
            <a class="text-yellow fw-bold menu-navbar__a" href="cursos.html">CURSOS</a>
            <!--Falta agregar que se muestren los datos del usuario--> 
            <button id="btnUser" class="btn btn-secondary menu-navbar__btn">
                Mi cuenta
            </button>
            <!--Falta agregar una forma de cerrar sesi칩n, por el momento solo maneja que rediriga a pagina principal, sin eliminaci칩n de Token--> 
            <button class="btn btn-secondary menu-navbar__btn" onclick="redirectToPrincipal()">
                Cerrar Sesi칩n
             </button>
        </nav>
    </header>

    <section id="cursoNormal" class="main-section-normal">
        <h3 class="section-cursosIns fs-5">Mi aprendizaje</h3>
        <div class="container main-section-normal">
            <div class="main-container-cursos">
                <div class="cursos-flex" id="cursos-container"></div>
                <div class="botones">
                    <div class="pagination-dots" id="pagination-dots"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Modal para ver perfil-->
    <div class="jw-modal" id="modalUser">
        <div class="jw-modal-body">
            <div class="d-flex justify-content-between align-items-center mb-3 w-100">
                <h2>Perfil</h2>
                <i class="fa-solid fa-xmark fs-3" onclick="closeModal()"></i>
            </div>
            <div id="userProfile">
                <p><strong>Nombre:</strong> <span id="nombre"></span></p>
                <p><strong>Tipo de usuario:</strong> <span id="descripcion"></span></p>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const token = localStorage.getItem('token');
            if (!token) {
                alert('Debes iniciar sesi칩n primero.');
                window.location.href = 'login.html'; // Redirige a la p치gina de login
                return;
            }
    
            const role = localStorage.getItem('role');
            if (role !== 'normal') {
                alert('Acceso denegado. No tienes permiso para entrar aqu칤.');
                window.location.href = 'index.html'; // Redirige a la p치gina principal
            }
        });
    </script>
    
    <!--Muestra de como se debe llevar a cabo la muestra de los datos-->     
    <script>
        let cursos = [
            { id: 1, nombre: "Prueba 1", descripcion: "Aprende a estructurar p치ginas web con HTML y darles estilo con CSS.", imagen:"./assets/javaScrip.jpg"},
            { id: 1, nombre: "Prueba 2", descripcion: "Aprende a estructurar p치ginas web con HTML y darles estilo con CSS.", imagen:"./assets/logo 1.png"},
            { id: 1, nombre: "Prueba 3", descripcion: "Aprende a estructurar p치ginas web con HTML y darles estilo con CSS.", imagen:"./assets/logo 1.png"},
            { id: 1, nombre: "Prueba 4", descripcion: "Aprende a estructurar p치ginas web con HTML y darles estilo con CSS.", imagen:"./assets/logo 1.png"},
            { id: 1, nombre: "Prueba 5", descripcion: "Aprende a estructurar p치ginas web con HTML y darles estilo con CSS.", imagen:"./assets/logo 1.png"},
            { id: 1, nombre: "Prueba 6", descripcion: "Aprende a estructurar p치ginas web con HTML y darles estilo con CSS.", imagen:"./assets/logo 1.png"}
        ];

        let currentPage = 1;
        const itemsPerPage = 4;
        
        function renderCursos(page) {
            const container = document.getElementById("cursos-container");
            container.innerHTML = "";

            let start = (page - 1) * itemsPerPage;
            let end = start + itemsPerPage;
            let paginatedCursos = cursos.slice(start, end);

            paginatedCursos.forEach(curso => {
                const cursoDiv = document.createElement("div");
                cursoDiv.classList.add("cursoNormal");
                cursoDiv.innerHTML = `
                <div class="cursoConten">
                    <div class="contenidoCurNor">
                        
                        <img src="${curso.imagen}" alt="${curso.nombre}">
                        <div class="textNor">
                            <button class="botonDele" id="btnDele" onclick="eliminarCurso(${curso.id})">Salir del curso</button>
                            <h3>${curso.nombre}</h3>
                            <p class="fw-bold">Duraci칩n: ${curso.categoria}</p>
                            <p>${curso.descripcion}</p>
                        </div>
                    </div>
                    
                </div>
                `;
                container.appendChild(cursoDiv);
            });

            renderPaginationDots();
        }

        // 游댯 Funci칩n para generar los puntos de paginaci칩n
        function renderPaginationDots() {
            const paginationDots = document.getElementById("pagination-dots");
            paginationDots.innerHTML = "";

            let totalPages = Math.ceil(cursos.length / itemsPerPage);

            for (let i = 1; i <= totalPages; i++) {
                let dot = document.createElement("span");
                dot.classList.add("dot");
                if (i === currentPage) {
                    dot.classList.add("active");
                }
                dot.addEventListener("click", () => {
                    currentPage = i;
                    renderCursos(currentPage);
                });
                paginationDots.appendChild(dot);
            }
        }

        renderCursos(currentPage);
    </script>   
    <script type="text/javascript" src="js/main.js"></script>
    <script type="text/javascript" src="js/normalCursos.js"></script>
    
    <footer class="w-100">
        <div class="container w-100 py-5 footer-container">
            <p class="copyright">&copy 2025 Hermcode. Todos los derechos reservados</p>
    
            <div>
                <a href="https://www.facebook.com/Tecmileniomx/" class="d-block mb-1 text-white" target="_blank">
                    <i class="fa-brands fa-facebook"></i> <!-- Icono de Font Awesome -->
                    <span>Facebook</span>
                </a>
                <a href="https://www.youtube.com/user/vivetecmilenio" class="d-block mb-1 text-white" target="_blank">
                    <i class="fa-brands fa-youtube"></i> <!-- Icono de Font Awesome -->
                    <span>Youtube</span>
                </a>
                <a href="https://www.linkedin.com/" class="d-block mb-1 text-white" target="_blank">
                    <i class="fa-brands fa-linkedin"></i> <!-- Icono de Font Awesome -->
                    <span>LinkedIn</span>
                </a>
            </div>
        </div>
    </footer>
    
</body>
</html>
